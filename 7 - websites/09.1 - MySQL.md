# Comandos e Funções MySQL

G|uia-prático com os **comandos (statements)** e as **funções** mais usados no MySQL — com exemplos curtos e links oficiais para você se aprofundar.

## Comandos (SQL statements)

**Categorias principais**

* **DDL (Definição de dados):** `CREATE`, `ALTER`, `DROP`, `TRUNCATE`, `RENAME`.
* **DML (Manipulação de dados):** `SELECT`, `INSERT`, `UPDATE`, `DELETE`, `REPLACE` (específico do MySQL).
* **TCL (Transação):** `START TRANSACTION`, `COMMIT`, `ROLLBACK`, `SAVEPOINT`, `SET TRANSACTION`, `LOCK/UNLOCK TABLES`.
* **DCL/Administrativos:** `CREATE USER`, `ALTER USER`, `GRANT`, `REVOKE`, `SET`, `SHOW`, `EXPLAIN`, `DESCRIBE`, `USE`, manutenção de tabelas (`ANALYZE`, `OPTIMIZE`, `REPAIR`). ([dev.mysql.com][1])

**Exemplos rápidos**

```sql
-- DDL
CREATE TABLE clientes (
  id INT PRIMARY KEY AUTO_INCREMENT,
  nome VARCHAR(100) NOT NULL,
  email VARCHAR(255) UNIQUE
);

ALTER TABLE clientes ADD COLUMN criado_em DATETIME DEFAULT CURRENT_TIMESTAMP;

-- DML
INSERT INTO clientes (nome, email) VALUES ('Ana', 'ana@exemplo.com');
UPDATE clientes SET nome = 'Ana Maria' WHERE id = 1;
DELETE FROM clientes WHERE id = 2;

-- TCL
START TRANSACTION;
UPDATE contas SET saldo = saldo - 100 WHERE id = 1;
UPDATE contas SET saldo = saldo + 100 WHERE id = 2;
COMMIT; -- ou ROLLBACK;
```

## Funções e operadores nativos (por categoria)

* **Strings:** `CONCAT`, `CONCAT_WS`, `SUBSTRING`/`SUBSTR`, `LEFT`/`RIGHT`, `LENGTH`/`CHAR_LENGTH`, `REPLACE`, `TRIM`/`LTRIM`/`RTRIM`, `LOWER`/`UPPER`, `LPAD`/`RPAD`, `LOCATE`/`INSTR`, `REGEXP_LIKE`, `REGEXP_REPLACE`, `REGEXP_SUBSTR`, `REGEXP_INSTR`. 

* **Numéricas:** `ABS`, `ROUND`, `CEIL`/`CEILING`, `FLOOR`, `MOD`, `POWER`, `SQRT`, `RAND`. 

* **Datas e horas:** `NOW`/`CURRENT_TIMESTAMP`, `CURDATE`/`CURTIME`, `DATE_ADD`/`DATE_SUB`, `ADDDATE`, `DATEDIFF`, `TIMESTAMPDIFF`, `EXTRACT`, `STR_TO_DATE`, `DATE_FORMAT`. 

* **Agregação:** `COUNT`, `SUM`, `AVG`, `MIN`, `MAX`, `GROUP_CONCAT` (muito útil!), além de modificadores com `GROUP BY`. 

* **Controle de fluxo e nulos:** `CASE`, `IF`, `IFNULL`, `NULLIF`, `COALESCE`. 

* **Conversão:** `CAST`, `CONVERT`, `BINARY`. 

* **JSON (nativo no MySQL 8+):** `JSON_EXTRACT` (operadores `->` e `->>`), `JSON_SET`, `JSON_REPLACE`, `JSON_REMOVE`, `JSON_ARRAY`, `JSON_OBJECT`, `JSON_TABLE`, `JSON_ARRAYAGG`, `JSON_OBJECTAGG`, utilitários como `JSON_PRETTY`. 

* **Funções de janela (Window):** `ROW_NUMBER`, `RANK`, `DENSE_RANK`, `LAG`, `LEAD`, `FIRST_VALUE`, `LAST_VALUE`, `NTILE`, `CUME_DIST`, `PERCENT_RANK` com `OVER (PARTITION BY ... ORDER BY ...)`. 

* **Espaciais/GIS:** `ST_AsText`, `ST_AsGeoJSON`, `ST_Distance`, `ST_Contains`, `ST_Within`, `ST_Intersects`, criadoras/conversoras de geometrias (WKT/WKB). 

* **Criptografia/Compressão:** `AES_ENCRYPT`/`AES_DECRYPT`, `SHA2`, `MD5` (legado), `RANDOM_BYTES`, `COMPRESS`/`UNCOMPRESS`. 

**Exemplos rápidos de funções**

```sql
-- Strings e regex
SELECT REGEXP_REPLACE('abc-123-xyz', '[0-9]+', '#');  -- abc-#-xyz

-- Datas
SELECT DATE_ADD('2025-10-01', INTERVAL 7 DAY);        -- 2025-10-08

-- JSON
SELECT JSON_EXTRACT('{"a":1,"b":[10,20]}', '$.b[1]'); -- 20
SELECT JSON_SET('{"a":1}', '$.b', 2);                 -- {"a": 1, "b": 2}

-- Janela
SELECT
  id, categoria, preço,
  ROW_NUMBER() OVER (PARTITION BY categoria ORDER BY preço DESC) AS rn
FROM produtos;

-- GIS (exemplo simples)
SELECT ST_Distance(ST_PointFromText('POINT(0 0)'), ST_PointFromText('POINT(3 4)')); -- 5
```

### Onde consultar a lista completa

**[MySQL 9.4 Reference Manual](https://dev.mysql.com/doc/refman/9.4/en/)**

* **[Todas as funções e operadores nativos](https://dev.mysql.com/doc/refman/9.4/en/built-in-function-reference.html):** tabela/índice oficial das funções. 
* **[Funções de string](https://dev.mysql.com/doc/refman/9.4/en/string-functions.html) (inclui `REGEXP_*`):** seção dedicada. 
* **[JSON ](https://dev.mysql.com/doc/refman/9.4/en/json-functions.html)(guia e referência):** visão geral e referência detalhada. 
* **[Funções de janela](https://dev.mysql.com/doc/refman/9.4/en/window-functions.html) (conceitos e lista):** documentação oficial. 
* **[Funções espaciais](https://dev.mysql.com/doc/refman/9.4/en/spatial-function-reference.html) (GIS):** listas e análises. 
* **[Catálogo de statements](https://dev.mysql.com/doc/refman/9.4/en/sql-statements.html) (comandos):** índice de comandos SQL. 
* **[Compressão e Criptografia](https://dev.mysql.com/doc/refman/9.4/en/encryption-functions.html):** índice de funções de compressão e croptografia. 





